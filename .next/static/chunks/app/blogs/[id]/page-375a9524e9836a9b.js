(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[429],{9019:function(e,t,n){Promise.resolve().then(n.bind(n,4215))},3765:function(e,t,n){"use strict";n.d(t,{AuthUserProvider:function(){return c},a:function(){return i}});var r=n(7437),a=n(2265),s=n(5735),l=n(177);let o=(0,a.createContext)({authUser:null,isLoading:!0,signOut:async()=>{}});function c(e){let{children:t}=e,n=function(){let[e,t]=(0,a.useState)(null),[n,r]=(0,a.useState)(!0),o=()=>{t(null),r(!1)},c=async e=>{if(r(!0),!e){o();return}t({uid:e.uid,email:e.email}),r(!1)};return(0,a.useEffect)(()=>{let e=(0,s.Aj)(l.I,c);return()=>e()},[]),{authUser:e,isLoading:n,signOut:()=>(0,s.w7)(l.I).then(o)}}();return(0,r.jsx)(o.Provider,{value:n,children:t})}let i=()=>(0,a.useContext)(o)},4215:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});var r=n(7437),a=n(3765),s=n(2265),l=n(2266);function o(e){let{value:t,className:n=""}=e;if("string"!=typeof t)throw Error("Expected a string: ",t);let a=(0,l.Qc)(t.replace(/^[\u200B\u200C\u200D\u200E\u200F\uFEFF]/,""));return(0,r.jsx)("div",{className:"h-1/2 p-2 text-black overflow-y-scroll ".concat(n),dangerouslySetInnerHTML:{__html:a}})}function c(){return(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-gray-900"})}var i=n(3778);n(516);var u=n(9842);function d(e){let{blogId:t,comments:n}=e,[a,l]=(0,s.useState)("");if(!n)return(0,r.jsx)("div",{className:"p-2",children:"No comments, yet."});let o=()=>l(""),c=async e=>{e.preventDefault(),a.length&&(await (0,i.Ir)(t,n,a),o(),n.push({content:a,date:u.EK.now()}))};return(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsx)("h5",{className:"text-xl font-semibold",children:"Comments"}),n.map(e=>{let{content:t,date:n}=e;return(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("div",{className:"",children:t}),(0,r.jsx)("div",{className:"font-extralight font-",children:new Date(1e3*n.seconds).toLocaleString()})]},crypto.randomUUID())}),(0,r.jsxs)("form",{className:"p-2",onSubmit:c,children:[(0,r.jsx)("input",{className:"p-2 mx-2 my-2 w-full bg-emerald-500 text-white placeholder-white focus:bg-emerald-400 transition-colors rounded-sm",type:"text",placeholder:"Thoughts about the post?",value:a,onChange:e=>{l(e.target.value)}}),(0,r.jsx)("button",{type:"submit",className:"py-2 px-4 mx-2 font-bold bg-gray-300 hover:bg-gray-400",children:"Add Comment"})]})]})}var m=n(6463);function h(e){let{params:t}=e,[n,l]=(0,s.useState)(null),{authUser:u,isLoading:h}=(0,a.a)(),x=(0,m.useRouter)();if((0,s.useEffect)(()=>{h||u||x.push("/"),(0,i.OM)(t.id).then(e=>l({id:t.id,...e}))},[]),!n)return(0,r.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,r.jsx)(c,{})});let{id:f,title:p,plainText:b,comments:g}=n;return(0,r.jsxs)("div",{children:[n&&(0,r.jsxs)("div",{className:"m-2 bg-white dark:text-white dark:bg-slate-800 rounded-lg shadow-lg",children:[(0,r.jsx)("h1",{className:"text-3xl px-4 py-6",children:p}),(0,r.jsx)(o,{value:b}),(0,r.jsx)(d,{comments:g,blogId:f})]}),!h&&u&&n&&(0,r.jsx)("div",{className:"flex flex-col p-4 gap-6 h-screen",children:(null==b?void 0:b.plainText)&&(0,r.jsx)(o,{value:b.plainText})})]})}},177:function(e,t,n){"use strict";n.d(t,{A:function(){return c},I:function(){return o},db:function(){return i}});var r=n(5236),a=n(5735),s=n(9842);let l=(0,r.ZF)({apiKey:"AIzaSyBn9JakJN-izD7uDrsFHxQEV7H5DxS-s9Q",authDomain:"collab-text-editor-b3328.firebaseapp.com",projectId:"collab-text-editor-b3328",storageBucket:"collab-text-editor-b3328.appspot.com",messagingSenderId:"443381731232",appId:"1:443381731232:web:77268257b25ef694111ec5",measurementId:"G-N6M4N3NLEE"}),o=(0,a.v0)(l),c=new a.hJ,i=(0,s.ad)()},3778:function(e,t,n){"use strict";n.d(t,{Ir:function(){return o},OM:function(){return l},fn:function(){return s}});var r=n(177),a=n(9842);let s=async e=>{try{return(await (0,a.PL)(e)).docs.map(e=>({id:e.id,...e.data()}))}catch(e){return console.error("Failed to get the Texts collection",e),[]}},l=async e=>{try{let t=(0,a.JU)(r.db,"texts",e);return(await (0,a.QT)(t)).data()}catch(e){return console.error("Failed to get the Texts collection",e),[]}},o=async(e,t,n)=>{try{let s=(0,a.JU)(r.db,"texts",e);await (0,a.r7)(s,{comments:[...t,{date:new Date,content:n}]})}catch(e){console.error("Failed to add a comment to a Blog document",e)}}}},function(e){e.O(0,[358,863,481,678,420,971,23,744],function(){return e(e.s=9019)}),_N_E=e.O()}]);